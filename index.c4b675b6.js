!function(){function t(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,s=Array(i);e<i;e++)s[e]=t[e];return s}var i=new/*#__PURE__*/(function(){var i;function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];!function(t,i){if(!(t instanceof i))throw TypeError("Cannot call a class as a function")}(this,e),this.size=4,this.score=0,this.status="idle",this.button=document.querySelector(".button.start"),this.gameScore=document.querySelector(".game-score"),this.messageStart=document.querySelector(".message-start"),this.messageLose=document.querySelector(".message-lose"),this.messageWin=document.querySelector(".message-win"),this.isStopGenerateCells=!1,this.initialState=i.map(function(i){return function(i){if(Array.isArray(i))return t(i)}(i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(i,e){if(i){if("string"==typeof i)return t(i,void 0);var s=Object.prototype.toString.call(i).slice(8,-1);if("Object"===s&&i.constructor&&(s=i.constructor.name),"Map"===s||"Set"===s)return Array.from(s);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return t(i,void 0)}}(i)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()})}return i=[{key:"checkVictory",value:function(){this.initialState.flat().find(function(t){return 2048===t})&&this.messageWin&&this.button&&(this.status="win",this.messageWin.classList.remove("hidden"),this.button.classList.remove("start"),this.button.classList.add("restart"),this.button.innerHTML="Restart")}},{key:"checkLose",value:function(){if(this.initialState.every(function(t){return t.every(function(t){return 0!==t})})){for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)if(i<this.size-1&&this.initialState[t][i]===this.initialState[t][i+1]||t<this.size-1&&this.initialState[t][i]===this.initialState[t+1][i])return;this.status="lose",this.messageLose&&this.messageLose.classList.remove("hidden")}}},{key:"moveLeft",value:function(){if(this.isStatusPlaying()){for(var t=!1,i=0;i<this.size;i++)for(var e=0;e<this.size;e++)for(var s=e+1;s<this.size;s++){var a=this.initialState[i][e],n=this.initialState[i][s];if(0===a&&0!==n){this.initialState[i][e]=n,this.initialState[i][s]=0,t=!0;continue}if(0!==a&&n===a){var r=2*a;this.initialState[i][e]=r,this.initialState[i][s]=0,this.score+=r,t=!0;break}if((0===a||0!==n)&&0!==a&&n!==a)break}t&&(this.isStopGenerateCells||this.transposeState(),this.checkVictory(),this.checkLose())}}},{key:"moveRight",value:function(){if(this.isStatusPlaying()){this.changeTextButton();for(var t=!1,i=0;i<this.size;i++)for(var e=this.size-1;e>=0;e--)for(var s=e-1;s>=0;s--){var a=this.initialState[i][e],n=this.initialState[i][s];if(0===a&&0!==n){this.initialState[i][e]=n,this.initialState[i][s]=0,t=!0;continue}if(0!==a&&n===a){var r=2*a;this.initialState[i][e]=r,this.initialState[i][s]=0,this.score+=r,t=!0;break}if(0!==a&&0===n||0!==a&&n!==a)break}t&&(this.isStopGenerateCells||this.transposeState(),this.checkVictory(),this.checkLose())}}},{key:"moveUp",value:function(){if(this.isStatusPlaying()){this.changeTextButton();for(var t=!1,i=0;i<this.size;i++)for(var e=0;e<this.size;e++)for(var s=e+1;s<this.size;s++){var a=this.initialState[e][i],n=this.initialState[s][i];if(0===a&&0!==n){this.initialState[e][i]=n,this.initialState[s][i]=0,t=!0;continue}if(0!==a&&n===a){var r=2*a;this.initialState[e][i]=r,this.initialState[s][i]=0,this.score+=r,t=!0;break}if((0===a||0!==n)&&0!==a&&n!==a)break}t&&(this.isStopGenerateCells||this.transposeState(),this.checkVictory(),this.checkLose())}}},{key:"moveDown",value:function(){if(this.isStatusPlaying()){this.changeTextButton();for(var t=!1,i=0;i<this.size;i++)for(var e=this.size-1;e>=0;e--)for(var s=e-1;s>=0;s--){var a=this.initialState[e][i],n=this.initialState[s][i];if(0===a&&0!==n){this.initialState[e][i]=n,this.initialState[s][i]=0,t=!0;continue}if(0!==a&&n===a){var r=2*a;this.initialState[e][i]=r,this.initialState[s][i]=0,this.score+=r,t=!0;break}if((0===a||0!==n)&&0!==a&&n!==a)break}t&&(this.isStopGenerateCells||this.transposeState(),this.checkVictory(),this.checkLose())}}},{key:"changeTextButton",value:function(){this.button&&(this.button.classList.remove("start"),this.button.classList.add("restart"),this.button.innerHTML="Restart")}},{key:"getScore",value:function(){return this.score}},{key:"isStatusPlaying",value:function(){return"playing"===this.status}},{key:"getState",value:function(){return this.initialState}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){"playing"!==this.status&&(this.transposeState(),this.transposeState(),this.status="playing",this.messageStart&&this.messageStart.classList.add("hidden"))}},{key:"restart",value:function(){this.initialState=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.status="idle",this.score=0,this.button&&(this.button.classList.remove("restart"),this.button.classList.add("start"),this.button.innerHTML="Start",this.messageWin.classList.add("hidden")),this.gameScore&&(this.gameScore.innerHTML="0"),this.messageStart&&this.messageStart.classList.remove("hidden"),this.messageLose&&this.messageLose.classList.add("hidden")}},{key:"generateNewNumber",value:function(){return .9>Math.random()?2:4}},{key:"transposeState",value:function(){for(var t=[],i=0;i<this.size;i++)for(var e=0;e<this.size;e++)0===this.initialState[i][e]&&t.push({row:i,col:e});if(t.length>0){var s=Math.floor(Math.random()*t.length),a=t[s],n=a.row,r=a.col;this.initialState[n][r]=this.generateNewNumber()}}}],function(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}(e.prototype,i),e}());function e(){i.getState().forEach(function(t,i){t.forEach(function(t,e){var s=document.querySelectorAll(".field-row")[i].children[e];0!==t?s.innerText=t:s.innerText="",s.className="",s.classList.add("field-cell","field-cell--".concat(t))})})}window.game=i,e(),document.querySelector(".start").addEventListener("click",function(){"Restart"===i.button.innerHTML?i.restart():i.start(),e()}),document.addEventListener("keydown",function(t){var s=t.key;"ArrowLeft"===s&&i.moveLeft(),"ArrowRight"===s&&i.moveRight(),"ArrowUp"===s&&i.moveUp(),"ArrowDown"===s&&i.moveDown();var a=document.querySelector(".game-score");a&&(a.innerText=i.getScore()),e()})}();
//# sourceMappingURL=index.c4b675b6.js.map
